<!DOCTYPE html>
<html lang="th" class="light-style layout-navbar-fixed layout-menu-fixed">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <title>เพิ่มโครงการใหม่ | ระบบคลังสินค้าขนาดย่อม</title>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.3/css/flag-icons.min.css">

  <!-- Core CSS -->
  <link rel="stylesheet" href="../assets/vendor/css/rtl/core.css" class="template-customizer-core-css">
  <link rel="stylesheet" href="../assets/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css">
  <link rel="stylesheet" href="../assets/css/demo.css">

  <!-- Vendors CSS -->
  <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css">
  <link rel="stylesheet" href="../assets/vendor/libs/typeahead-js/typeahead.css">
  <link rel="stylesheet" href="../assets/vendor/libs/select2/select2.css">
  <link rel="stylesheet" href="../assets/vendor/libs/flatpickr/flatpickr.css">
  <link rel="stylesheet" href="../assets/vendor/libs/tagify/tagify.css">
  <link rel="stylesheet" href="../assets/vendor/libs/formvalidation/dist/css/formValidation.min.css">
  <link rel="stylesheet" href="../assets/vendor/libs/dropzone/dropzone.css">
  <link rel="stylesheet" href="../assets/vendor/libs/sweetalert2/sweetalert2.css">
  <link rel="stylesheet" href="../assets/vendor/libs/bs-stepper/bs-stepper.css">
  <link rel="stylesheet" href="../assets/vendor/libs/animate-css/animate.css">

  <!-- Page CSS -->
  <style>
    /* รวมและปรับปรุง CSS เพื่อความเป็นระเบียบและประสิทธิภาพ */
    .contact-list-item, .team-list-item {
      border-left: 3px solid transparent;
      transition: all 0.25s ease;
      cursor: pointer;
      border-radius: 0.375rem;
    }
    
    .contact-list-item:hover, .team-list-item:hover {
      background-color: rgba(105, 108, 255, 0.1);
      border-left-color: #696cff;
      transform: translateX(3px);
    }
    
    .contact-list-item.selected {
      background-color: rgba(105, 108, 255, 0.16);
      border-left-color: #696cff;
      box-shadow: 0 0.125rem 0.25rem rgba(161, 172, 184, 0.4);
    }
    
    .stepline {
      list-style-type: none;
      position: relative;
      padding-left: 0;
      margin-bottom: 0;
    }
    
    .stepline li {
      position: relative;
      padding-left: 30px;
      padding-bottom: 20px;
    }
    
    .stepline li:last-child {
      padding-bottom: 0;
    }
    
    .stepline li:before {
      content: '';
      position: absolute;
      top: 0;
      left: 10px;
      height: 100%;
      width: 2px;
      background-color: #d9dee3;
    }
    
    .stepline li:after {
      content: '';
      position: absolute;
      top: 6px;
      left: 5px;
      height: 12px;
      width: 12px;
      border-radius: 50%;
      background-color: #d9dee3;
    }
    
    .stepline li.active:after {
      background-color: #696cff;
    }
    
    .stepline li.active:before {
      background: linear-gradient(to bottom, #696cff 0%, #d9dee3 100%);
    }
    
    .stepline li.completed:after {
      background-color: #28c76f;
    }
    
    .stepline li.completed:before {
      background-color: #28c76f;
    }
    
    /* สไตล์สำหรับการ์ดของแต่ละรายการ */
    .project-card, .contact-item, .phase-item, .team-item {
      transition: all 0.3s ease;
      border-radius: 0.75rem;
      border: 1px solid #dfe4ea;
      box-shadow: 0 0.125rem 0.25rem rgba(161, 172, 184, 0.12);
    }
    
    .project-card:hover, .contact-item:hover, .phase-item:hover, .team-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 0.5rem 1rem rgba(161, 172, 184, 0.2);
    }
    
    /* สไตล์สำหรับ Dropzone */
    .dropzone {
      border: 2px dashed #d9dee3;
      border-radius: 0.5rem;
      background-color: #f8f7fa;
      transition: all 0.2s ease;
    }
    
    .dropzone:hover {
      border-color: #696cff;
      background-color: rgba(105, 108, 255, 0.04);
    }
    
    .dz-message {
      padding: 2rem 1rem;
      margin: 0;
    }
    
    /* สไตล์สำหรับ BS Stepper */
    .bs-stepper .step-trigger {
      padding: 1rem 0.5rem;
    }
    
    .bs-stepper .step-trigger:hover {
      background-color: transparent;
    }
    
    .bs-stepper-circle {
      height: 2.5rem;
      width: 2.5rem;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f8f7fa;
      color: #697a8d;
      border: none;
      font-weight: 500;
    }
    
    .step.active .bs-stepper-circle {
      background-color: #696cff;
      color: #fff;
      box-shadow: 0 0.25rem 1rem rgba(105, 108, 255, 0.4);
    }
    
    .step.active .bs-stepper-label .bs-stepper-title {
      color: #696cff;
    }
    
    /* สไตล์สำหรับปุ่มลบ */
    .btn-delete-contact,
    .btn-delete-phase,
    .btn-delete-team {
      opacity: 0.7;
      transition: opacity 0.2s ease;
    }
    
    .btn-delete-contact:hover,
    .btn-delete-phase:hover,
    .btn-delete-team:hover {
      opacity: 1;
    }
    
    /* ปรับปรุง responsive design */
    @media (max-width: 768px) {
      .bs-stepper-header {
        overflow-x: auto;
        flex-wrap: nowrap;
      }
      
      .bs-stepper-content {
        padding: 0.5rem;
      }
      
      .bs-stepper-circle {
        height: 2rem;
        width: 2rem;
        font-size: 0.875rem;
      }
      
      .bs-stepper-label {
        font-size: 0.875rem;
      }
    }
  </style>

  <!-- Helpers -->
  <script src="../assets/vendor/js/helpers.js"></script>
  <script src="../assets/js/config.js"></script>
</head>

<body>
  <!-- Layout wrapper -->
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
      
      <!-- Menu -->
      <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
        <div class="app-brand demo">
          <a href="dashboard.html" class="app-brand-link">
            <span class="app-brand-logo demo">
              <svg width="26px" height="26px" viewBox="0 0 26 26" version="1.1">
                <polygon points="7.5 2 7.5 5 4.5 5 4.5 22 17 22 17 19 22 19 22 5 17 5 17 2" fill="#696cff" />
                <polygon points="13 15 10 12 13 9 16 12" fill="#696cff" opacity="0.7" />
              </svg>
            </span>
            <span class="app-brand-text demo menu-text fw-bold ms-2">คลังสินค้า</span>
          </a>

          <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto">
            <i class="bx menu-toggle-icon d-none d-xl-block fs-4"></i>
            <i class="bx bx-x d-block d-xl-none bx-sm"></i>
          </a>
        </div>

        <div class="menu-divider mt-0"></div>

        <div class="menu-inner-shadow"></div>

        <ul class="menu-inner py-1">
          <!-- Dashboard -->
          <li class="menu-item">
            <a href="dashboard.html" class="menu-link">
              <i class="menu-icon tf-icons bx bx-home-circle"></i>
              <div data-i18n="หน้าหลัก">หน้าหลัก</div>
            </a>
          </li>

          <!-- วัสดุ -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">จัดการวัสดุและเครื่องมือ</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-package"></i>
              <div data-i18n="วัสดุสิ้นเปลือง">วัสดุสิ้นเปลือง</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="consumable-list.html" class="menu-link">
                  <div data-i18n="รายการวัสดุ">รายการวัสดุ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="consumable-add.html" class="menu-link">
                  <div data-i18n="เพิ่มวัสดุใหม่">เพิ่มวัสดุใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="consumable-withdraw.html" class="menu-link">
                  <div data-i18n="เบิกวัสดุ">เบิกวัสดุ</div>
                </a>
              </li>
            </ul>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-cube-alt"></i>
              <div data-i18n="วัสดุคงทน">วัสดุคงทน</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="durable-list.html" class="menu-link">
                  <div data-i18n="รายการวัสดุ">รายการวัสดุ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="durable-add.html" class="menu-link">
                  <div data-i18n="เพิ่มวัสดุใหม่">เพิ่มวัสดุใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="durable-withdraw.html" class="menu-link">
                  <div data-i18n="เบิก-คืนวัสดุ">เบิก-คืนวัสดุ</div>
                </a>
              </li>
            </ul>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-wrench"></i>
              <div data-i18n="เครื่องมือ">เครื่องมือ</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="tools-list.html" class="menu-link">
                  <div data-i18n="รายการเครื่องมือ">รายการเครื่องมือ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="tools-add.html" class="menu-link">
                  <div data-i18n="เพิ่มเครื่องมือใหม่">เพิ่มเครื่องมือใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="tools-withdraw.html" class="menu-link">
                  <div data-i18n="เบิก-คืนเครื่องมือ">เบิก-คืนเครื่องมือ</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- รถ -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">จัดการรถ</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-car"></i>
              <div data-i18n="ยานพาหนะ">ยานพาหนะ</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="vehicle-list.html" class="menu-link">
                  <div data-i18n="รายการรถ">รายการรถ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="vehicle-add.html" class="menu-link">
                  <div data-i18n="เพิ่มรถใหม่">เพิ่มรถใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="vehicle-repair.html" class="menu-link">
                  <div data-i18n="บันทึกการซ่อม">บันทึกการซ่อม</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- โครงการก่อสร้าง -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">โครงการก่อสร้าง</span>
          </li>

          <li class="menu-item active open">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-building-house"></i>
              <div data-i18n="รับเหมาก่อสร้าง">รับเหมาก่อสร้าง</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="projects-dashboard.html" class="menu-link">
                  <div data-i18n="ภาพรวมโครงการ">ภาพรวมโครงการ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="projects-list.html" class="menu-link">
                  <div data-i18n="รายการโครงการ">รายการโครงการ</div>
                </a>
              </li>
              <li class="menu-item active">
                <a href="project-add.html" class="menu-link">
                  <div data-i18n="เพิ่มโครงการใหม่">เพิ่มโครงการใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="project-calendar.html" class="menu-link">
                  <div data-i18n="ปฏิทินโครงการ">ปฏิทินโครงการ</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- รายงาน -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">รายงาน</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-line-chart"></i>
              <div data-i18n="รายงานต่างๆ">รายงานต่างๆ</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="report-monthly-tools.html" class="menu-link">
                  <div data-i18n="รายงานเครื่องมือประจำเดือน">รายงานเครื่องมือประจำเดือน</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="report-vehicle-cost.html" class="menu-link">
                  <div data-i18n="รายงานค่าใช้จ่ายรถ">รายงานค่าใช้จ่ายรถ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="report-executive.html" class="menu-link">
                  <div data-i18n="รายงานสำหรับผู้บริหาร">รายงานสำหรับผู้บริหาร</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="report-projects.html" class="menu-link">
                  <div data-i18n="รายงานโครงการก่อสร้าง">รายงานโครงการก่อสร้าง</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- ผู้ใช้งาน (เฉพาะผู้บริหาร) -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">ระบบจัดการ</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-user"></i>
              <div data-i18n="ผู้ใช้งาน">ผู้ใช้งาน</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="user-list.html" class="menu-link">
                  <div data-i18n="รายชื่อผู้ใช้">รายชื่อผู้ใช้</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="user-add.html" class="menu-link">
                  <div data-i18n="เพิ่มผู้ใช้ใหม่">เพิ่มผู้ใช้ใหม่</div>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </aside>
      <!-- / Menu -->

      <!-- Layout container -->
      <div class="layout-page">
        <!-- Navbar -->
        <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme" id="layout-navbar">
          <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
            <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
              <i class="bx bx-menu bx-sm"></i>
            </a>
          </div>

          <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
            <!-- Search -->
            <div class="navbar-nav align-items-center">
              <div class="nav-item navbar-search-wrapper mb-0">
                <a class="nav-item nav-link search-toggler px-0" href="javascript:void(0);">
                  <i class="bx bx-search-alt bx-sm"></i>
                  <span class="d-none d-md-inline-block text-muted">ค้นหา (Ctrl+/)</span>
                </a>
              </div>
            </div>
            <!-- /Search -->

            <ul class="navbar-nav flex-row align-items-center ms-auto">
              <!-- Language -->
              <li class="nav-item dropdown-language dropdown me-2 me-xl-0">
                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                  <i class="fi fi-th fis rounded-circle me-1 fs-3"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item selected" href="javascript:void(0);" data-language="th">
                      <i class="fi fi-th fis rounded-circle fs-4 me-1"></i>
                      <span class="align-middle">ไทย</span>
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="javascript:void(0);" data-language="en">
                      <i class="fi fi-us fis rounded-circle fs-4 me-1"></i>
                      <span class="align-middle">English</span>
                    </a>
                  </li>
                </ul>
              </li>
              <!-- /Language -->

              <!-- Style Switcher -->
              <li class="nav-item me-2 me-xl-0">
                <a class="nav-link style-switcher-toggle hide-arrow" href="javascript:void(0);">
                  <i class="bx bx-sm"></i>
                </a>
              </li>
              <!--/ Style Switcher -->

              <!-- Notification -->
              <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                  <i class="bx bx-bell bx-sm"></i>
                  <span class="badge bg-danger rounded-pill badge-notifications">5</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end py-0">
                  <li class="dropdown-menu-header border-bottom">
                    <div class="dropdown-header d-flex align-items-center py-3">
                      <h5 class="text-body mb-0 me-auto">การแจ้งเตือน</h5>
                      <a href="javascript:void(0)" class="dropdown-notifications-all text-body" data-bs-toggle="tooltip" data-bs-placement="top" title="Mark all as read"><i class="bx fs-4 bx-envelope-open"></i></a>
                    </div>
                  </li>
                  <li class="dropdown-notifications-list scrollable-container">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item list-group-item-action dropdown-notifications-item">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar">
                              <span class="avatar-initial rounded-circle bg-label-primary"><i class="bx bx-building-house"></i></span>
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-1">โครงการอาคารพาณิชย์ใกล้หมดสัญญา</h6>
                            <p class="mb-0">สัญญาจะสิ้นสุดภายใน 7 วัน</p>
                            <small class="text-muted">30 นาทีที่แล้ว</small>
                          </div>
                          <div class="flex-shrink-0 dropdown-notifications-actions">
                            <a href="javascript:void(0)" class="dropdown-notifications-read"><span class="badge badge-dot"></span></a>
                            <a href="javascript:void(0)" class="dropdown-notifications-archive"><span class="bx bx-x"></span></a>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item list-group-item-action dropdown-notifications-item marked-as-read">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar">
                              <span class="avatar-initial rounded-circle bg-label-danger"><i class="bx bx-error"></i></span>
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-1">โครงการหมู่บ้านจัดสรรล่าช้า</h6>
                            <p class="mb-0">ความคืบหน้าน้อยกว่าแผนงาน 15%</p>
                            <small class="text-muted">1 ชั่วโมงที่แล้ว</small>
                          </div>
                          <div class="flex-shrink-0 dropdown-notifications-actions">
                            <a href="javascript:void(0)" class="dropdown-notifications-read"><span class="badge badge-dot"></span></a>
                            <a href="javascript:void(0)" class="dropdown-notifications-archive"><span class="bx bx-x"></span></a>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </li>
                  <li class="dropdown-menu-footer border-top">
                    <a href="javascript:void(0);" class="dropdown-item d-flex justify-content-center p-3">
                      ดูการแจ้งเตือนทั้งหมด
                    </a>
                  </li>
                </ul>
              </li>
              <!--/ Notification -->

              <!-- User -->
              <li class="nav-item navbar-dropdown dropdown-user dropdown">
                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                  <div class="avatar avatar-online">
                    <img src="../assets/img/avatars/1.png" alt class="rounded-circle">
                  </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="account-settings.html">
                      <div class="d-flex">
                        <div class="flex-shrink-0 me-3">
                          <div class="avatar avatar-online">
                            <img src="../assets/img/avatars/1.png" alt class="rounded-circle">
                          </div>
                        </div>
                        <div class="flex-grow-1">
                          <span class="fw-semibold d-block">สมชาย มีสุข</span>
                          <small class="text-muted">ผู้บริหาร</small>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item" href="account-settings.html">
                      <i class="bx bx-user me-2"></i>
                      <span class="align-middle">ข้อมูลส่วนตัว</span>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item" href="login.html">
                      <i class="bx bx-power-off me-2"></i>
                      <span class="align-middle">ออกจากระบบ</span>
                    </a>
                  </li>
                </ul>
              </li>
              <!--/ User -->
            </ul>
          </div>
        </nav>
        <!-- / Navbar -->

        <!-- Content wrapper -->
        <div class="content-wrapper">
          <!-- Content -->
          <div class="container-xxl flex-grow-1 container-p-y">
            <h4 class="fw-bold py-3 mb-4">
              <span class="text-muted fw-light">โครงการก่อสร้าง /</span> เพิ่มโครงการใหม่
            </h4>

            <!-- Wizard -->
            <div class="row">
              <div class="col-12">
                <div class="bs-stepper wizard-numbered mt-2">
                  <div class="bs-stepper-header">
                    <div class="step" data-target="#project-info">
                      <button type="button" class="step-trigger">
                        <span class="bs-stepper-circle">1</span>
                        <span class="bs-stepper-label">
                          <span class="bs-stepper-title">ข้อมูลโครงการ</span>
                          <span class="bs-stepper-subtitle">ระบุข้อมูลพื้นฐานโครงการ</span>
                        </span>
                      </button>
                    </div>
                    <div class="line"></div>
                    <div class="step" data-target="#client-info">
                      <button type="button" class="step-trigger">
                        <span class="bs-stepper-circle">2</span>
                        <span class="bs-stepper-label">
                          <span class="bs-stepper-title">ข้อมูลลูกค้า</span>
                          <span class="bs-stepper-subtitle">ระบุข้อมูลลูกค้า/ผู้ว่าจ้าง</span>
                        </span>
                      </button>
                    </div>
                    <div class="line"></div>
                    <div class="step" data-target="#contract-info">
                      <button type="button" class="step-trigger">
                        <span class="bs-stepper-circle">3</span>
                        <span class="bs-stepper-label">
                          <span class="bs-stepper-title">ข้อมูลสัญญา</span>
                          <span class="bs-stepper-subtitle">ระบุรายละเอียดสัญญา</span>
                        </span>
                      </button>
                    </div>
                    <div class="line"></div>
                    <div class="step" data-target="#team-info">
                      <button type="button" class="step-trigger">
                        <span class="bs-stepper-circle">4</span>
                        <span class="bs-stepper-label">
                          <span class="bs-stepper-title">ทีมงาน</span>
                          <span class="bs-stepper-subtitle">ระบุทีมงานโครงการ</span>
                        </span>
                      </button>
                    </div>
                    <div class="line"></div>
                    <div class="step" data-target="#files-info">
                      <button type="button" class="step-trigger">
                        <span class="bs-stepper-circle">5</span>
                        <span class="bs-stepper-label">
                          <span class="bs-stepper-title">เอกสาร</span>
                          <span class="bs-stepper-subtitle">อัพโหลดเอกสารที่เกี่ยวข้อง</span>
                        </span>
                      </button>
                    </div>
                  </div>
                  <div class="bs-stepper-content">
                    <!-- Project Info -->
                    <div id="project-info" class="content">
                      <div class="row">
                        <div class="col-12">
                          <div class="card mb-4">
                            <div class="card-header">
                              <h5 class="mb-0">ข้อมูลพื้นฐานโครงการ</h5>
                              <small class="text-muted">กรุณาระบุข้อมูลพื้นฐานของโครงการก่อสร้าง</small>
                            </div>
                            <div class="card-body">
                              <div class="row g-3">
                                <div class="col-md-6">
                                  <label class="form-label" for="projectName">ชื่อโครงการ <span class="text-danger">*</span></label>
                                  <input type="text" id="projectName" class="form-control" placeholder="ระบุชื่อโครงการ">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="projectType">ประเภทโครงการ <span class="text-danger">*</span></label>
                                  <select id="projectType" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกประเภทโครงการ</option>
                                    <option value="house">บ้านพักอาศัย</option>
                                    <option value="townhouse">ทาวน์เฮาส์</option>
                                    <option value="commercial">อาคารพาณิชย์</option>
                                    <option value="condo">คอนโดมิเนียม</option>
                                    <option value="office">อาคารสำนักงาน</option>
                                    <option value="factory">โรงงาน</option>
                                    <option value="warehouse">โกดัง/คลังสินค้า</option>
                                    <option value="hotel">โรงแรม</option>
                                    <option value="hospital">โรงพยาบาล</option>
                                    <option value="school">อาคารการศึกษา</option>
                                    <option value="renovation">ต่อเติม/ปรับปรุง</option>
                                    <option value="other">อื่นๆ</option>
                                  </select>
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="constructionType">ลักษณะงาน <span class="text-danger">*</span></label>
                                  <select id="constructionType" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกลักษณะงาน</option>
                                    <option value="new">ก่อสร้างใหม่</option>
                                    <option value="renovation">ต่อเติม/ปรับปรุง</option>
                                    <option value="repair">ซ่อมแซม</option>
                                    <option value="demolish">รื้อถอน</option>
                                    <option value="mixed">รวมหลายลักษณะ</option>
                                  </select>
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="constructionArea">พื้นที่ก่อสร้าง (ตร.ม.) <span class="text-danger">*</span></label>
                                  <input type="number" id="constructionArea" class="form-control" placeholder="ระบุพื้นที่ก่อสร้าง">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="projectValue">มูลค่าโครงการ (บาท) <span class="text-danger">*</span></label>
                                  <input type="number" id="projectValue" class="form-control" placeholder="ระบุมูลค่าโครงการ">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="projectDuration">ระยะเวลาดำเนินการ (วัน) <span class="text-danger">*</span></label>
                                  <input type="number" id="projectDuration" class="form-control" placeholder="ระบุระยะเวลาดำเนินการ">
                                </div>
                                <div class="col-12">
                                  <label class="form-label" for="projectDescription">รายละเอียดโครงการ</label>
                                  <textarea id="projectDescription" class="form-control" rows="4" placeholder="ระบุรายละเอียดโครงการ"></textarea>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="card mb-4">
                            <div class="card-header">
                              <h5 class="mb-0">ที่ตั้งโครงการ</h5>
                              <small class="text-muted">กรุณาระบุข้อมูลที่ตั้งของโครงการก่อสร้าง</small>
                            </div>
                            <div class="card-body">
                              <div class="row g-3">
                                <div class="col-12">
                                  <label class="form-label" for="projectAddress">ที่อยู่ <span class="text-danger">*</span></label>
                                  <textarea id="projectAddress" class="form-control" rows="2" placeholder="ระบุที่อยู่โครงการ"></textarea>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="projectProvince">จังหวัด <span class="text-danger">*</span></label>
                                  <select id="projectProvince" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกจังหวัด</option>
                                    <option value="กรุงเทพมหานคร">กรุงเทพมหานคร</option>
                                    <option value="กระบี่">กระบี่</option>
                                    <option value="กาญจนบุรี">กาญจนบุรี</option>
                                    <option value="กาฬสินธุ์">กาฬสินธุ์</option>
                                    <option value="กำแพงเพชร">กำแพงเพชร</option>
                                    <option value="ขอนแก่น">ขอนแก่น</option>
                                    <option value="จันทบุรี">จันทบุรี</option>
                                    <option value="ฉะเชิงเทรา">ฉะเชิงเทรา</option>
                                    <option value="ชลบุรี">ชลบุรี</option>
                                    <option value="นนทบุรี">นนทบุรี</option>
                                    <option value="ปทุมธานี">ปทุมธานี</option>
                                    <option value="สมุทรปราการ">สมุทรปราการ</option>
                                  </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="projectDistrict">อำเภอ/เขต <span class="text-danger">*</span></label>
                                  <select id="projectDistrict" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกอำเภอ/เขต</option>
                                    <option value="เมือง">เมือง</option>
                                    <option value="บางกรวย">บางกรวย</option>
                                    <option value="บางใหญ่">บางใหญ่</option>
                                    <option value="ปากเกร็ด">ปากเกร็ด</option>
                                  </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="projectSubDistrict">ตำบล/แขวง <span class="text-danger">*</span></label>
                                  <select id="projectSubDistrict" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกตำบล/แขวง</option>
                                    <option value="บางกระสอ">บางกระสอ</option>
                                    <option value="ตลาดขวัญ">ตลาดขวัญ</option>
                                    <option value="ท่าทราย">ท่าทราย</option>
                                    <option value="บางเขน">บางเขน</option>
                                  </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="projectZipcode">รหัสไปรษณีย์ <span class="text-danger">*</span></label>
                                  <input type="text" id="projectZipcode" class="form-control" placeholder="รหัสไปรษณีย์">
                                </div>
                                <div class="col-12">
                                  <label class="form-label">ตำแหน่งบนแผนที่ (ถ้ามี)</label>
                                  <div class="input-group">
                                    <input type="text" class="form-control" placeholder="ละติจูด, ลองติจูด (เช่น 13.7563,100.5018)">
                                    <button class="btn btn-outline-primary" type="button">
                                      <i class="bx bx-map me-1"></i> ระบุบนแผนที่
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex justify-content-between mt-3">
                        <button class="btn btn-outline-secondary btn-prev" disabled>
                          <i class="bx bx-chevron-left bx-sm ms-sm-n2"></i>
                          <span class="d-sm-inline-block d-none">ย้อนกลับ</span>
                        </button>
                        <button class="btn btn-primary btn-next">
                          <span class="d-sm-inline-block d-none">ต่อไป</span>
                          <i class="bx bx-chevron-right bx-sm me-sm-n2"></i>
                        </button>
                      </div>
                    </div>

                    <!-- Client Info -->
                    <div id="client-info" class="content">
                      <div class="row">
                        <div class="col-lg-8 col-xl-9 mb-3 mb-lg-0">
                          <div class="card mb-3">
                            <div class="card-header">
                              <h5 class="mb-0">ข้อมูลลูกค้า</h5>
                              <small class="text-muted">กรุณาระบุข้อมูลลูกค้าหรือผู้ว่าจ้าง</small>
                            </div>
                            <div class="card-body">
                              <div class="row g-3">
                                <div class="col-md-6">
                                  <label class="form-label" for="clientType">ประเภทลูกค้า <span class="text-danger">*</span></label>
                                  <select id="clientType" class="form-select">
                                    <option value="individual">บุคคลธรรมดา</option>
                                    <option value="company">นิติบุคคล/บริษัท</option>
                                    <option value="government">หน่วยงานรัฐ</option>
                                  </select>
                                </div>
                                <div class="col-md-6" id="individualFields">
                                  <label class="form-label" for="clientPrefix">คำนำหน้า</label>
                                  <select id="clientPrefix" class="form-select">
                                    <option value="นาย">นาย</option>
                                    <option value="นาง">นาง</option>
                                    <option value="นางสาว">นางสาว</option>
                                    <option value="ดร.">ดร.</option>
                                  </select>
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="clientName">ชื่อ <span class="text-danger">*</span></label>
                                  <input type="text" id="clientName" class="form-control" placeholder="ชื่อลูกค้า">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="clientLastname">นามสกุล <span class="text-danger">*</span></label>
                                  <input type="text" id="clientLastname" class="form-control" placeholder="นามสกุลลูกค้า">
                                </div>
                                <div class="col-md-6" id="companyFields" style="display: none;">
                                  <label class="form-label" for="companyName">ชื่อบริษัท/องค์กร <span class="text-danger">*</span></label>
                                  <input type="text" id="companyName" class="form-control" placeholder="ชื่อบริษัทหรือองค์กร">
                                </div>
                                <div class="col-md-6" id="taxIdField" style="display: none;">
                                  <label class="form-label" for="taxId">เลขประจำตัวผู้เสียภาษี</label>
                                  <input type="text" id="taxId" class="form-control" placeholder="เลขประจำตัวผู้เสียภาษี">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="clientEmail">อีเมล <span class="text-danger">*</span></label>
                                  <input type="email" id="clientEmail" class="form-control" placeholder="อีเมล">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="clientPhone">เบอร์โทรศัพท์ <span class="text-danger">*</span></label>
                                  <input type="text" id="clientPhone" class="form-control" placeholder="เบอร์โทรศัพท์">
                                </div>
                                <div class="col-md-12">
                                  <label class="form-label" for="clientAddress">ที่อยู่</label>
                                  <textarea id="clientAddress" class="form-control" rows="2" placeholder="ที่อยู่"></textarea>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="clientProvince">จังหวัด</label>
                                  <select id="clientProvince" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกจังหวัด</option>
                                    <option value="กรุงเทพมหานคร">กรุงเทพมหานคร</option>
                                    <option value="นนทบุรี">นนทบุรี</option>
                                    <option value="ปทุมธานี">ปทุมธานี</option>
                                  </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="clientDistrict">อำเภอ/เขต</label>
                                  <select id="clientDistrict" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกอำเภอ/เขต</option>
                                    <option value="เมือง">เมือง</option>
                                    <option value="บางกรวย">บางกรวย</option>
                                  </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="clientSubDistrict">ตำบล/แขวง</label>
                                  <select id="clientSubDistrict" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกตำบล/แขวง</option>
                                    <option value="บางกระสอ">บางกระสอ</option>
                                    <option value="ตลาดขวัญ">ตลาดขวัญ</option>
                                  </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                  <label class="form-label" for="clientZipcode">รหัสไปรษณีย์</label>
                                  <input type="text" id="clientZipcode" class="form-control" placeholder="รหัสไปรษณีย์">
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">ผู้ติดต่อเพิ่มเติม</h5>
                              <small class="text-muted">ระบุข้อมูลผู้ติดต่อเพิ่มเติม (ถ้ามี)</small>
                            </div>
                            <div class="card-body">
                              <div class="row g-3 mb-3" id="contactsContainer">
                                <div class="col-12 contact-item">
                                  <div class="card shadow-none border p-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                      <h6 class="mb-0">ผู้ติดต่อ #1</h6>
                                      <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-contact">
                                        <i class="bx bx-trash me-1"></i> ลบ
                                      </button>
                                    </div>
                                    <div class="row g-3">
                                      <div class="col-md-6">
                                        <label class="form-label">ชื่อ-นามสกุล</label>
                                        <input type="text" class="form-control" placeholder="ชื่อ-นามสกุล">
                                      </div>
                                      <div class="col-md-6">
                                        <label class="form-label">ตำแหน่ง</label>
                                        <input type="text" class="form-control" placeholder="ตำแหน่ง">
                                      </div>
                                      <div class="col-md-6">
                                        <label class="form-label">เบอร์โทรศัพท์</label>
                                        <input type="text" class="form-control" placeholder="เบอร์โทรศัพท์">
                                      </div>
                                      <div class="col-md-6">
                                        <label class="form-label">อีเมล</label>
                                        <input type="email" class="form-control" placeholder="อีเมล">
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="text-center">
                                <button type="button" class="btn btn-primary" id="addContact">
                                  <i class="bx bx-plus me-1"></i> เพิ่มผู้ติดต่อ
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-4 col-xl-3">
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">ลูกค้าที่มีอยู่แล้ว</h5>
                              <small class="text-muted">เลือกจากลูกค้าที่มีอยู่แล้ว</small>
                            </div>
                            <div class="card-body">
                              <div class="mb-3">
                                <input type="text" class="form-control" placeholder="ค้นหาลูกค้า..." id="searchClient">
                              </div>
                              <div class="client-list">
                                <div class="contact-list-item p-2 rounded mb-2">
                                  <div class="d-flex align-items-center">
                                    <div class="avatar avatar-sm me-2">
                                      <div class="avatar-initial rounded-circle bg-label-primary">
                                        <i class="bx bx-user"></i>
                                      </div>
                                    </div>
                                    <div>
                                      <p class="mb-0 fw-semibold">คุณวิชัย รักดี</p>
                                      <small class="text-muted">บุคคลธรรมดา</small>
                                    </div>
                                  </div>
                                </div>
                                <div class="contact-list-item p-2 rounded mb-2">
                                  <div class="d-flex align-items-center">
                                    <div class="avatar avatar-sm me-2">
                                      <div class="avatar-initial rounded-circle bg-label-info">
                                        <i class="bx bx-buildings"></i>
                                      </div>
                                    </div>
                                    <div>
                                      <p class="mb-0 fw-semibold">บริษัท ธุรกิจก้าวหน้า จำกัด</p>
                                      <small class="text-muted">นิติบุคคล/บริษัท</small>
                                    </div>
                                  </div>
                                </div>
                                <div class="contact-list-item p-2 rounded mb-2">
                                  <div class="d-flex align-items-center">
                                    <div class="avatar avatar-sm me-2">
                                      <div class="avatar-initial rounded-circle bg-label-primary">
                                        <i class="bx bx-user"></i>
                                      </div>
                                    </div>
                                    <div>
                                      <p class="mb-0 fw-semibold">คุณสมศักดิ์ ใจดี</p>
                                      <small class="text-muted">บุคคลธรรมดา</small>
                                    </div>
                                  </div>
                                </div>
                                <div class="contact-list-item p-2 rounded mb-2">
                                  <div class="d-flex align-items-center">
                                    <div class="avatar avatar-sm me-2">
                                      <div class="avatar-initial rounded-circle bg-label-info">
                                        <i class="bx bx-buildings"></i>
                                      </div>
                                    </div>
                                    <div>
                                      <p class="mb-0 fw-semibold">บริษัท พร็อพเพอร์ตี้ ดีเวลลอปเม้นท์ จำกัด</p>
                                      <small class="text-muted">นิติบุคคล/บริษัท</small>
                                    </div>
                                  </div>
                                </div>
                                <div class="contact-list-item p-2 rounded mb-2">
                                  <div class="d-flex align-items-center">
                                    <div class="avatar avatar-sm me-2">
                                      <div class="avatar-initial rounded-circle bg-label-info">
                                        <i class="bx bx-buildings"></i>
                                      </div>
                                    </div>
                                    <div>
                                      <p class="mb-0 fw-semibold">บริษัท อิเล็กทรอนิกส์ เทค จำกัด</p>
                                      <small class="text-muted">นิติบุคคล/บริษัท</small>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex justify-content-between mt-3">
                        <button class="btn btn-outline-secondary btn-prev">
                          <i class="bx bx-chevron-left bx-sm ms-sm-n2"></i>
                          <span class="d-sm-inline-block d-none">ย้อนกลับ</span>
                        </button>
                        <button class="btn btn-primary btn-next">
                          <span class="d-sm-inline-block d-none">ต่อไป</span>
                          <i class="bx bx-chevron-right bx-sm me-sm-n2"></i>
                        </button>
                      </div>
                    </div>

                    <!-- Contract Info -->
                    <div id="contract-info" class="content">
                      <div class="row">
                        <div class="col-12">
                          <div class="card mb-4">
                            <div class="card-header">
                              <h5 class="mb-0">ข้อมูลสัญญา</h5>
                              <small class="text-muted">กรุณาระบุข้อมูลสัญญาโครงการ</small>
                            </div>
                            <div class="card-body">
                              <div class="row g-3">
                                <div class="col-md-6">
                                  <label class="form-label" for="contractNumber">เลขที่สัญญา <span class="text-danger">*</span></label>
                                  <input type="text" id="contractNumber" class="form-control" placeholder="เลขที่สัญญา">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="contractDate">วันที่ทำสัญญา <span class="text-danger">*</span></label>
                                  <input type="text" id="contractDate" class="form-control flatpickr-date" placeholder="วันที่ทำสัญญา">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="contractStartDate">วันเริ่มต้นสัญญา <span class="text-danger">*</span></label>
                                  <input type="text" id="contractStartDate" class="form-control flatpickr-date" placeholder="วันเริ่มต้นสัญญา">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="contractEndDate">วันสิ้นสุดสัญญา <span class="text-danger">*</span></label>
                                  <input type="text" id="contractEndDate" class="form-control flatpickr-date" placeholder="วันสิ้นสุดสัญญา">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="warrantyPeriod">ระยะเวลารับประกัน (เดือน)</label>
                                  <input type="number" id="warrantyPeriod" class="form-control" placeholder="ระยะเวลารับประกัน">
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="costPerDay">ค่าปรับล่าช้า (บาท/วัน)</label>
                                  <input type="number" id="costPerDay" class="form-control" placeholder="ค่าปรับล่าช้า">
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="card mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                              <div>
                                <h5 class="mb-0">งวดงานและงวดเงิน</h5>
                                <small class="text-muted">กรุณาระบุข้อมูลงวดงานและงวดเงิน</small>
                              </div>
                              <button type="button" class="btn btn-primary btn-sm" id="addPhase">
                                <i class="bx bx-plus me-1"></i> เพิ่มงวดงาน
                              </button>
                            </div>
                            <div class="card-body">
                              <div id="phasesContainer">
                                <div class="phase-item card shadow-none border p-3 mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="mb-0">งวดที่ 1</h6>
                                    <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-phase">
                                      <i class="bx bx-trash me-1"></i> ลบ
                                    </button>
                                  </div>
                                  <div class="row g-3">
                                    <div class="col-md-6">
                                      <label class="form-label">มูลค่างวดงาน (บาท)</label>
                                      <input type="number" class="form-control" placeholder="มูลค่างวดงาน">
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">เปอร์เซ็นต์ของมูลค่าโครงการ (%)</label>
                                      <div class="input-group">
                                        <input type="number" class="form-control" placeholder="เปอร์เซ็นต์">
                                        <span class="input-group-text">%</span>
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <label class="form-label">รายละเอียดงวดงาน</label>
                                      <textarea class="form-control" rows="3" placeholder="รายละเอียดงวดงาน"></textarea>
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">วันที่กำหนดส่งมอบ (ประมาณการ)</label>
                                      <input type="text" class="form-control flatpickr-date" placeholder="วันที่กำหนดส่งมอบ">
                                    </div>
                                  </div>
                                </div>
                                
                                <div class="phase-item card shadow-none border p-3 mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="mb-0">งวดที่ 2</h6>
                                    <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-phase">
                                      <i class="bx bx-trash me-1"></i> ลบ
                                    </button>
                                  </div>
                                  <div class="row g-3">
                                    <div class="col-md-6">
                                      <label class="form-label">มูลค่างวดงาน (บาท)</label>
                                      <input type="number" class="form-control" placeholder="มูลค่างวดงาน">
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">เปอร์เซ็นต์ของมูลค่าโครงการ (%)</label>
                                      <div class="input-group">
                                        <input type="number" class="form-control" placeholder="เปอร์เซ็นต์">
                                        <span class="input-group-text">%</span>
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <label class="form-label">รายละเอียดงวดงาน</label>
                                      <textarea class="form-control" rows="3" placeholder="รายละเอียดงวดงาน"></textarea>
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">วันที่กำหนดส่งมอบ (ประมาณการ)</label>
                                      <input type="text" class="form-control flatpickr-date" placeholder="วันที่กำหนดส่งมอบ">
                                    </div>
                                  </div>
                                </div>
                                
                                <div class="phase-item card shadow-none border p-3 mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="mb-0">งวดที่ 3</h6>
                                    <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-phase">
                                      <i class="bx bx-trash me-1"></i> ลบ
                                    </button>
                                  </div>
                                  <div class="row g-3">
                                    <div class="col-md-6">
                                      <label class="form-label">มูลค่างวดงาน (บาท)</label>
                                      <input type="number" class="form-control" placeholder="มูลค่างวดงาน">
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">เปอร์เซ็นต์ของมูลค่าโครงการ (%)</label>
                                      <div class="input-group">
                                        <input type="number" class="form-control" placeholder="เปอร์เซ็นต์">
                                        <span class="input-group-text">%</span>
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <label class="form-label">รายละเอียดงวดงาน</label>
                                      <textarea class="form-control" rows="3" placeholder="รายละเอียดงวดงาน"></textarea>
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">วันที่กำหนดส่งมอบ (ประมาณการ)</label>
                                      <input type="text" class="form-control flatpickr-date" placeholder="วันที่กำหนดส่งมอบ">
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="alert alert-primary d-flex mb-0">
                                <i class="bx bx-info-circle bx-sm me-2"></i>
                                <div>
                                  <h6 class="alert-heading mb-1">ตรวจสอบข้อมูล</h6>
                                  <span>ผลรวมเปอร์เซ็นต์ของงวดงานทั้งหมด: <strong>100%</strong></span><br>
                                  <span>ผลรวมมูลค่างวดงานทั้งหมด: <strong>5,800,000 บาท</strong></span><br>
                                  <span>มูลค่าโครงการทั้งหมด: <strong>5,800,000 บาท</strong></span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">รายละเอียดอื่นๆ</h5>
                              <small class="text-muted">กรุณาระบุข้อมูลเพิ่มเติม (ถ้ามี)</small>
                            </div>
                            <div class="card-body">
                              <div class="row g-3">
                                <div class="col-12">
                                  <label class="form-label" for="contractNote">หมายเหตุเพิ่มเติม</label>
                                  <textarea id="contractNote" class="form-control" rows="3" placeholder="หมายเหตุเพิ่มเติม"></textarea>
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label" for="contractApprover">ผู้อนุมัติสัญญา</label>
                                  <select id="contractApprover" class="select2 form-select" data-allow-clear="true">
                                    <option value="">เลือกผู้อนุมัติ</option>
                                    <option value="1">สมชาย มีสุข</option>
                                    <option value="2">ณัฐพงษ์ รุ่งเรือง</option>
                                  </select>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex justify-content-between mt-3">
                        <button class="btn btn-outline-secondary btn-prev">
                          <i class="bx bx-chevron-left bx-sm ms-sm-n2"></i>
                          <span class="d-sm-inline-block d-none">ย้อนกลับ</span>
                        </button>
                        <button class="btn btn-primary btn-next">
                          <span class="d-sm-inline-block d-none">ต่อไป</span>
                          <i class="bx bx-chevron-right bx-sm me-sm-n2"></i>
                        </button>
                      </div>
                    </div>

                    <!-- Team Info -->
                    <div id="team-info" class="content">
                      <div class="row">
                        <div class="col-lg-8 col-xl-9 mb-3 mb-lg-0">
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">ทีมงานโครงการ</h5>
                              <small class="text-muted">กรุณาระบุทีมงานที่รับผิดชอบโครงการ</small>
                            </div>
                            <div class="card-body">
                              <div id="teamContainer">
                                <div class="team-item card shadow-none border p-3 mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="mb-0">สมาชิกทีม #1</h6>
                                    <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-team">
                                      <i class="bx bx-trash me-1"></i> ลบ
                                    </button>
                                  </div>
                                  <div class="row g-3">
                                    <div class="col-md-6">
                                      <label class="form-label">ชื่อ-นามสกุล <span class="text-danger">*</span></label>
                                      <select class="select2 form-select" data-allow-clear="true">
                                        <option value="">เลือกสมาชิกทีม</option>
                                        <option value="1">สมชาย มีสุข</option>
                                        <option value="2">ณัฐพงษ์ รุ่งเรือง</option>
                                        <option value="3">สมหญิง รักดี</option>
                                        <option value="4">มานะ สมบัติ</option>
                                        <option value="5">วิชัย สว่าง</option>
                                      </select>
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">ตำแหน่ง/บทบาท <span class="text-danger">*</span></label>
                                      <select class="select2 form-select" data-allow-clear="true">
                                        <option value="">เลือกตำแหน่ง/บทบาท</option>
                                        <option value="projectManager">ผู้จัดการโครงการ</option>
                                        <option value="engineer">วิศวกรโครงการ</option>
                                        <option value="architect">สถาปนิก</option>
                                        <option value="foreman">ผู้ควบคุมงาน</option>
                                        <option value="electricalEngineer">วิศวกรไฟฟ้า</option>
                                        <option value="mechanicalEngineer">วิศวกรเครื่องกล</option>
                                        <option value="safetyOfficer">เจ้าหน้าที่ความปลอดภัย</option>
                                        <option value="purchasingOfficer">เจ้าหน้าที่จัดซื้อ</option>
                                        <option value="accountant">เจ้าหน้าที่บัญชี</option>
                                        <option value="admin">เจ้าหน้าที่ธุรการ</option>
                                      </select>
                                    </div>
                                    <div class="col-12">
                                      <label class="form-label">หน้าที่รับผิดชอบ</label>
                                      <textarea class="form-control" rows="2" placeholder="อธิบายหน้าที่รับผิดชอบ"></textarea>
                                    </div>
                                  </div>
                                </div>
                                
                                <div class="team-item card shadow-none border p-3 mb-3">
                                  <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="mb-0">สมาชิกทีม #2</h6>
                                    <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-team">
                                      <i class="bx bx-trash me-1"></i> ลบ
                                    </button>
                                  </div>
                                  <div class="row g-3">
                                    <div class="col-md-6">
                                      <label class="form-label">ชื่อ-นามสกุล <span class="text-danger">*</span></label>
                                      <select class="select2 form-select" data-allow-clear="true">
                                        <option value="">เลือกสมาชิกทีม</option>
                                        <option value="1">สมชาย มีสุข</option>
                                        <option value="2">ณัฐพงษ์ รุ่งเรือง</option>
                                        <option value="3">สมหญิง รักดี</option>
                                        <option value="4">มานะ สมบัติ</option>
                                        <option value="5">วิชัย สว่าง</option>
                                      </select>
                                    </div>
                                    <div class="col-md-6">
                                      <label class="form-label">ตำแหน่ง/บทบาท <span class="text-danger">*</span></label>
                                      <select class="select2 form-select" data-allow-clear="true">
                                        <option value="">เลือกตำแหน่ง/บทบาท</option>
                                        <option value="projectManager">ผู้จัดการโครงการ</option>
                                        <option value="engineer">วิศวกรโครงการ</option>
                                        <option value="architect">สถาปนิก</option>
                                        <option value="foreman">ผู้ควบคุมงาน</option>
                                        <option value="electricalEngineer">วิศวกรไฟฟ้า</option>
                                        <option value="mechanicalEngineer">วิศวกรเครื่องกล</option>
                                        <option value="safetyOfficer">เจ้าหน้าที่ความปลอดภัย</option>
                                        <option value="purchasingOfficer">เจ้าหน้าที่จัดซื้อ</option>
                                        <option value="accountant">เจ้าหน้าที่บัญชี</option>
                                        <option value="admin">เจ้าหน้าที่ธุรการ</option>
                                      </select>
                                    </div>
                                    <div class="col-12">
                                      <label class="form-label">หน้าที่รับผิดชอบ</label>
                                      <textarea class="form-control" rows="2" placeholder="อธิบายหน้าที่รับผิดชอบ"></textarea>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="text-center mt-3">
                                <button type="button" class="btn btn-primary" id="addTeamMember">
                                  <i class="bx bx-plus me-1"></i> เพิ่มสมาชิกทีม
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-4 col-xl-3">
                          <div class="card mb-4">
                            <div class="card-header">
                              <h5 class="mb-0">ผู้ที่มีอยู่ในระบบ</h5>
                              <small class="text-muted">รายชื่อผู้ใช้ในระบบ</small>
                            </div>
                            <div class="card-body">
                              <div class="mb-3">
                                <input type="text" class="form-control" placeholder="ค้นหาผู้ใช้..." id="searchUser">
                              </div>
                              <div class="user-list">
                                <ul class="stepline">
                                  <li class="active">
                                    <div class="d-flex justify-content-between align-items-center team-list-item p-1 rounded">
                                      <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-2">
                                          <img src="../assets/img/avatars/1.png" alt="Avatar" class="rounded-circle">
                                        </div>
                                        <div>
                                          <p class="mb-0 fw-semibold">สมชาย มีสุข</p>
                                          <small class="text-muted">ผู้บริหาร</small>
                                        </div>
                                      </div>
                                      <button type="button" class="btn btn-sm btn-icon btn-text-secondary p-0">
                                        <i class="bx bx-plus"></i>
                                      </button>
                                    </div>
                                  </li>
                                  <li class="active">
                                    <div class="d-flex justify-content-between align-items-center team-list-item p-1 rounded">
                                      <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-2">
                                          <img src="../assets/img/avatars/2.png" alt="Avatar" class="rounded-circle">
                                        </div>
                                        <div>
                                          <p class="mb-0 fw-semibold">ณัฐพงษ์ รุ่งเรือง</p>
                                          <small class="text-muted">วิศวกร</small>
                                        </div>
                                      </div>
                                      <button type="button" class="btn btn-sm btn-icon btn-text-secondary p-0">
                                        <i class="bx bx-plus"></i>
                                      </button>
                                    </div>
                                  </li>
                                  <li class="active">
                                    <div class="d-flex justify-content-between align-items-center team-list-item p-1 rounded">
                                      <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-2">
                                          <img src="../assets/img/avatars/5.png" alt="Avatar" class="rounded-circle">
                                        </div>
                                        <div>
                                          <p class="mb-0 fw-semibold">สมหญิง รักดี</p>
                                          <small class="text-muted">สถาปนิก</small>
                                        </div>
                                      </div>
                                      <button type="button" class="btn btn-sm btn-icon btn-text-secondary p-0">
                                        <i class="bx bx-plus"></i>
                                      </button>
                                    </div>
                                  </li>
                                  <li class="active">
                                    <div class="d-flex justify-content-between align-items-center team-list-item p-1 rounded">
                                      <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-2">
                                          <img src="../assets/img/avatars/8.png" alt="Avatar" class="rounded-circle">
                                        </div>
                                        <div>
                                          <p class="mb-0 fw-semibold">มานะ สมบัติ</p>
                                          <small class="text-muted">ผู้ควบคุมงาน</small>
                                        </div>
                                      </div>
                                      <button type="button" class="btn btn-sm btn-icon btn-text-secondary p-0">
                                        <i class="bx bx-plus"></i>
                                      </button>
                                    </div>
                                  </li>
                                  <li>
                                    <div class="d-flex justify-content-between align-items-center team-list-item p-1 rounded">
                                      <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-2">
                                          <img src="../assets/img/avatars/3.png" alt="Avatar" class="rounded-circle">
                                        </div>
                                        <div>
                                          <p class="mb-0 fw-semibold">วิชัย สว่าง</p>
                                          <small class="text-muted">วิศวกรไฟฟ้า</small>
                                        </div>
                                      </div>
                                      <button type="button" class="btn btn-sm btn-icon btn-text-secondary p-0">
                                        <i class="bx bx-plus"></i>
                                      </button>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">เพิ่มผู้ใช้ใหม่</h5>
                              <small class="text-muted">เพิ่มผู้ใช้ที่ยังไม่มีในระบบ</small>
                            </div>
                            <div class="card-body">
                              <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#addNewUserModal">
                                <i class="bx bx-user-plus me-1"></i> เพิ่มผู้ใช้ใหม่
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex justify-content-between mt-3">
                        <button class="btn btn-outline-secondary btn-prev">
                          <i class="bx bx-chevron-left bx-sm ms-sm-n2"></i>
                          <span class="d-sm-inline-block d-none">ย้อนกลับ</span>
                        </button>
                        <button class="btn btn-primary btn-next">
                          <span class="d-sm-inline-block d-none">ต่อไป</span>
                          <i class="bx bx-chevron-right bx-sm me-sm-n2"></i>
                        </button>
                      </div>
                    </div>

                    <!-- Files Info -->
                    <div id="files-info" class="content">
                      <div class="row">
                        <div class="col-12 mb-4">
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">อัพโหลดเอกสารที่เกี่ยวข้อง</h5>
                              <small class="text-muted">อัพโหลดเอกสารที่เกี่ยวข้องกับโครงการ</small>
                            </div>
                            <div class="card-body">
                              <div class="mb-3">
                                <label class="form-label">แบบก่อสร้าง</label>
                                <div class="dropzone" id="uploadDrawings">
                                  <div class="dz-message needsclick">
                                    <i class="bx bx-cloud-upload fs-3 text-primary"></i>
                                    <h5 class="mt-2">คลิกหรือลากไฟล์มาที่นี่เพื่ออัพโหลด</h5>
                                    <p class="mb-0">รองรับไฟล์ .pdf, .dwg, .rvt, .jpg, .png</p>
                                  </div>
                                </div>
                              </div>
                              <div class="mb-3">
                                <label class="form-label">สัญญาโครงการ</label>
                                <div class="dropzone" id="uploadContracts">
                                  <div class="dz-message needsclick">
                                    <i class="bx bx-file fs-3 text-primary"></i>
                                    <h5 class="mt-2">คลิกหรือลากไฟล์มาที่นี่เพื่ออัพโหลด</h5>
                                    <p class="mb-0">รองรับไฟล์ .pdf, .doc, .docx</p>
                                  </div>
                                </div>
                              </div>
                              <div class="mb-3">
                                <label class="form-label">ใบอนุญาตก่อสร้าง</label>
                                <div class="dropzone" id="uploadPermits">
                                  <div class="dz-message needsclick">
                                    <i class="bx bx-certification fs-3 text-primary"></i>
                                    <h5 class="mt-2">คลิกหรือลากไฟล์มาที่นี่เพื่ออัพโหลด</h5>
                                    <p class="mb-0">รองรับไฟล์ .pdf, .jpg, .png</p>
                                  </div>
                                </div>
                              </div>
                              <div>
                                <label class="form-label">เอกสารอื่นๆ</label>
                                <div class="dropzone" id="uploadOthers">
                                  <div class="dz-message needsclick">
                                    <i class="bx bx-folder-open fs-3 text-primary"></i>
                                    <h5 class="mt-2">คลิกหรือลากไฟล์มาที่นี่เพื่ออัพโหลด</h5>
                                    <p class="mb-0">รองรับไฟล์ .pdf, .doc, .docx, .xls, .xlsx, .jpg, .png</p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="card">
                            <div class="card-header">
                              <h5 class="mb-0">สรุปข้อมูลโครงการ</h5>
                              <small class="text-muted">ตรวจสอบข้อมูลโครงการก่อนบัน
                                <small class="text-muted">ตรวจสอบข้อมูลโครงการก่อนบันทึก</small>
                            </div>
                            <div class="card-body">
                              <div class="row mb-4">
                                <div class="col-lg-6">
                                  <h6 class="mb-3">ข้อมูลโครงการ</h6>
                                  <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">รหัสโครงการ:</span>
                                      <span>P016 (สร้างอัตโนมัติ)</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ชื่อโครงการ:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ประเภทโครงการ:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ลักษณะงาน:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">พื้นที่ก่อสร้าง:</span>
                                      <span>- ตร.ม.</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">มูลค่าโครงการ:</span>
                                      <span>- บาท</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ระยะเวลาดำเนินการ:</span>
                                      <span>- วัน</span>
                                    </li>
                                  </ul>
                                </div>
                                <div class="col-lg-6 mt-4 mt-lg-0">
                                  <h6 class="mb-3">ข้อมูลลูกค้า</h6>
                                  <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ชื่อลูกค้า:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ประเภทลูกค้า:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">อีเมล:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">เบอร์โทรศัพท์:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ที่อยู่:</span>
                                      <span>-</span>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                              <div class="row mb-4">
                                <div class="col-lg-6">
                                  <h6 class="mb-3">ข้อมูลสัญญา</h6>
                                  <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">เลขที่สัญญา:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">วันที่ทำสัญญา:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">วันเริ่มต้นสัญญา:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">วันสิ้นสุดสัญญา:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ระยะเวลารับประกัน:</span>
                                      <span>- เดือน</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">จำนวนงวดงาน:</span>
                                      <span>3 งวด</span>
                                    </li>
                                  </ul>
                                </div>
                                <div class="col-lg-6 mt-4 mt-lg-0">
                                  <h6 class="mb-3">ทีมงานโครงการ</h6>
                                  <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">จำนวนสมาชิกทีม:</span>
                                      <span>2 คน</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">ผู้จัดการโครงการ:</span>
                                      <span>-</span>
                                    </li>
                                    <li class="mb-2">
                                      <span class="fw-semibold me-1">วิศวกรโครงการ:</span>
                                      <span>-</span>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                              <div class="alert alert-warning d-flex mb-0">
                                <i class="bx bx-info-circle bx-sm me-2"></i>
                                <div>
                                  <h6 class="alert-heading mb-1">ข้อควรทราบ</h6>
                                  <span>กรุณาตรวจสอบข้อมูลให้ถูกต้องก่อนทำการบันทึก เมื่อบันทึกแล้วจะสามารถแก้ไขข้อมูลได้ในภายหลัง</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex justify-content-between mt-3">
                        <button class="btn btn-outline-secondary btn-prev">
                          <i class="bx bx-chevron-left bx-sm ms-sm-n2"></i>
                          <span class="d-sm-inline-block d-none">ย้อนกลับ</span>
                        </button>
                        <button class="btn btn-success btn-submit">
                          <i class="bx bx-check bx-sm me-sm-n2"></i>
                          <span class="d-sm-inline-block d-none">บันทึกโครงการ</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Wizard -->
          </div>
          <!-- / Content -->

          <!-- Footer -->
          <footer class="content-footer footer bg-footer-theme">
            <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
              <div class="mb-2 mb-md-0">
                © <script>
                  document.write(new Date().getFullYear())
                </script>
                , ระบบคลังสินค้าขนาดย่อม v1.0
              </div>
              <div>
                <a href="#" class="footer-link me-4">หน้าหลัก</a>
                <a href="#" class="footer-link me-4">เกี่ยวกับเรา</a>
                <a href="#" class="footer-link me-4">ช่วยเหลือ</a>
                <a href="#" class="footer-link">ติดต่อเรา</a>
              </div>
            </div>
          </footer>
          <!-- / Footer -->

          <div class="content-backdrop fade"></div>
        </div>
        <!-- Content wrapper -->
      </div>
      <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
  </div>
  <!-- / Layout wrapper -->

  <!-- Add New User Modal -->
  <div class="modal fade" id="addNewUserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-simple">
      <div class="modal-content p-3 p-md-5">
        <div class="modal-body">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          <div class="text-center mb-4">
            <h3 class="mb-2">เพิ่มผู้ใช้ใหม่</h3>
            <p class="text-muted mb-0">ระบุข้อมูลผู้ใช้ที่ต้องการเพิ่มเข้าสู่ระบบ</p>
          </div>
          <form id="addNewUserForm" class="row g-3">
            <div class="col-12 col-md-6">
              <label class="form-label" for="modalUserFirstName">ชื่อ</label>
              <input type="text" id="modalUserFirstName" class="form-control" placeholder="ชื่อ">
            </div>
            <div class="col-12 col-md-6">
              <label class="form-label" for="modalUserLastName">นามสกุล</label>
              <input type="text" id="modalUserLastName" class="form-control" placeholder="นามสกุล">
            </div>
            <div class="col-12 col-md-6">
              <label class="form-label" for="modalUserEmail">อีเมล</label>
              <input type="email" id="modalUserEmail" class="form-control" placeholder="อีเมล">
            </div>
            <div class="col-12 col-md-6">
              <label class="form-label" for="modalUserPhone">เบอร์โทรศัพท์</label>
              <input type="text" id="modalUserPhone" class="form-control" placeholder="เบอร์โทรศัพท์">
            </div>
            <div class="col-12">
              <label class="form-label" for="modalUserRole">ตำแหน่ง/บทบาท</label>
              <select id="modalUserRole" class="select2 form-select" data-allow-clear="true">
                <option value="">เลือกตำแหน่ง/บทบาท</option>
                <option value="projectManager">ผู้จัดการโครงการ</option>
                <option value="engineer">วิศวกรโครงการ</option>
                <option value="architect">สถาปนิก</option>
                <option value="foreman">ผู้ควบคุมงาน</option>
                <option value="electricalEngineer">วิศวกรไฟฟ้า</option>
                <option value="mechanicalEngineer">วิศวกรเครื่องกล</option>
                <option value="safetyOfficer">เจ้าหน้าที่ความปลอดภัย</option>
                <option value="purchasingOfficer">เจ้าหน้าที่จัดซื้อ</option>
                <option value="accountant">เจ้าหน้าที่บัญชี</option>
                <option value="admin">เจ้าหน้าที่ธุรการ</option>
              </select>
            </div>
            <div class="col-12 text-center">
              <button type="submit" class="btn btn-primary me-sm-3 me-1">บันทึก</button>
              <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="modal" aria-label="Close">ยกเลิก</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Core JS -->
  <script src="../assets/vendor/libs/jquery/jquery.js"></script>
  <script src="../assets/vendor/libs/popper/popper.js"></script>
  <script src="../assets/vendor/js/bootstrap.js"></script>
  <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
  <script src="../assets/vendor/libs/hammer/hammer.js"></script>
  <script src="../assets/vendor/js/menu.js"></script>

  <!-- Vendors JS -->
  <script src="../assets/vendor/libs/bs-stepper/bs-stepper.js"></script>
  <script src="../assets/vendor/libs/select2/select2.js"></script>
  <script src="../assets/vendor/libs/flatpickr/flatpickr.js"></script>
  <script src="../assets/vendor/libs/tagify/tagify.js"></script>
  <script src="../assets/vendor/libs/formvalidation/dist/js/FormValidation.js"></script>
  <script src="../assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.js"></script>
  <script src="../assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.js"></script>
  <script src="../assets/vendor/libs/dropzone/dropzone.js"></script>
  <script src="../assets/vendor/libs/sweetalert2/sweetalert2.js"></script>

  <!-- Main JS -->
  <script src="../assets/js/main.js"></script>

  <!-- Page JS -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize Stepper
      const wizardNumbered = document.querySelector(".wizard-numbered");
      const wizardNumberedBtnNextList = [].slice.call(wizardNumbered.querySelectorAll('.btn-next'));
      const wizardNumberedBtnPrevList = [].slice.call(wizardNumbered.querySelectorAll('.btn-prev'));
      const wizardNumberedBtnSubmit = wizardNumbered.querySelector('.btn-submit');

      if(typeof bootstrap !== "undefined") {
        const bsStepper = new bootstrap.Stepper(wizardNumbered, {
          linear: false
        });

        // Next button click handler
        wizardNumberedBtnNextList.forEach(wizardNumberedBtnNext => {
          wizardNumberedBtnNext.addEventListener('click', event => {
            bsStepper.next();
          });
        });

        // Previous button click handler
        wizardNumberedBtnPrevList.forEach(wizardNumberedBtnPrev => {
          wizardNumberedBtnPrev.addEventListener('click', event => {
            bsStepper.previous();
          });
        });

        // Submit button click handler
        if (wizardNumberedBtnSubmit) {
          wizardNumberedBtnSubmit.addEventListener('click', event => {
            Swal.fire({
              title: 'บันทึกโครงการสำเร็จ',
              text: 'โครงการของคุณถูกบันทึกเรียบร้อยแล้ว',
              icon: 'success',
              confirmButtonText: 'ตกลง',
              customClass: {
                confirmButton: 'btn btn-primary'
              },
              buttonsStyling: false
            }).then(function() {
              window.location.href = 'projects-list.html';
            });
          });
        }
      }

      // Initialize Select2
      $('.select2').select2();

      // Initialize Flatpickr
      $('.flatpickr-date').flatpickr({
        altInput: true,
        altFormat: 'd/m/Y',
        dateFormat: 'Y-m-d',
        locale: {
          firstDayOfWeek: 1
        }
      });

      // Initialize Dropzone
      const dropzoneOptions = {
        url: "/project/file-upload",
        autoProcessQueue: false,
        maxFilesize: 10, // MB
        addRemoveLinks: true,
        dictRemoveFile: "<i class='bx bx-x'></i>",
        dictCancelUpload: "<i class='bx bx-x'></i>",
        dictDefaultMessage: "คลิกหรือลากไฟล์มาที่นี่เพื่ออัพโหลด",
        init: function() {
          this.on("addedfile", function(file) {
            console.log("File added: " + file.name);
          });
        }
      };
      
      // Specific Dropzones
      if(typeof Dropzone !== 'undefined') {
        new Dropzone("#uploadDrawings", {
          ...dropzoneOptions,
          acceptedFiles: ".pdf,.dwg,.rvt,.jpg,.jpeg,.png"
        });
        
        new Dropzone("#uploadContracts", {
          ...dropzoneOptions,
          acceptedFiles: ".pdf,.doc,.docx"
        });
        
        new Dropzone("#uploadPermits", {
          ...dropzoneOptions,
          acceptedFiles: ".pdf,.jpg,.jpeg,.png"
        });
        
        new Dropzone("#uploadOthers", {
          ...dropzoneOptions,
          acceptedFiles: ".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"
        });
      }

      // Client Type Toggle Fields
      $('#clientType').on('change', function() {
        const value = $(this).val();
        
        if (value === 'company' || value === 'government') {
          $('#individualFields').hide();
          $('#companyFields, #taxIdField').show();
        } else {
          $('#individualFields').show();
          $('#companyFields, #taxIdField').hide();
        }
      });

      // Add Contact
      $('#addContact').on('click', function() {
        const contactCount = $('.contact-item').length + 1;
        const html = `
          <div class="col-12 contact-item">
            <div class="card shadow-none border p-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0">ผู้ติดต่อ #${contactCount}</h6>
                <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-contact">
                  <i class="bx bx-trash me-1"></i> ลบ
                </button>
              </div>
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">ชื่อ-นามสกุล</label>
                  <input type="text" class="form-control" placeholder="ชื่อ-นามสกุล">
                </div>
                <div class="col-md-6">
                  <label class="form-label">ตำแหน่ง</label>
                  <input type="text" class="form-control" placeholder="ตำแหน่ง">
                </div>
                <div class="col-md-6">
                  <label class="form-label">เบอร์โทรศัพท์</label>
                  <input type="text" class="form-control" placeholder="เบอร์โทรศัพท์">
                </div>
                <div class="col-md-6">
                  <label class="form-label">อีเมล</label>
                  <input type="email" class="form-control" placeholder="อีเมล">
                </div>
              </div>
            </div>
          </div>
        `;
        
        $('#contactsContainer').append(html);
      });

      // Delete Contact
      $(document).on('click', '.btn-delete-contact', function() {
        $(this).closest('.contact-item').remove();
        
        // Renumber contacts
        $('.contact-item').each(function(index) {
          $(this).find('h6').text(`ผู้ติดต่อ #${index + 1}`);
        });
      });

      // Add Phase
      $('#addPhase').on('click', function() {
        const phaseCount = $('.phase-item').length + 1;
        const html = `
          <div class="phase-item card shadow-none border p-3 mb-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h6 class="mb-0">งวดที่ ${phaseCount}</h6>
              <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-phase">
                <i class="bx bx-trash me-1"></i> ลบ
              </button>
            </div>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">มูลค่างวดงาน (บาท)</label>
                <input type="number" class="form-control" placeholder="มูลค่างวดงาน">
              </div>
              <div class="col-md-6">
                <label class="form-label">เปอร์เซ็นต์ของมูลค่าโครงการ (%)</label>
                <div class="input-group">
                  <input type="number" class="form-control" placeholder="เปอร์เซ็นต์">
                  <span class="input-group-text">%</span>
                </div>
              </div>
              <div class="col-12">
                <label class="form-label">รายละเอียดงวดงาน</label>
                <textarea class="form-control" rows="3" placeholder="รายละเอียดงวดงาน"></textarea>
              </div>
              <div class="col-md-6">
                <label class="form-label">วันที่กำหนดส่งมอบ (ประมาณการ)</label>
                <input type="text" class="form-control flatpickr-date" placeholder="วันที่กำหนดส่งมอบ">
              </div>
            </div>
          </div>
        `;
        
        $('#phasesContainer').append(html);
        
        // Re-initialize Flatpickr for new elements
        $('#phasesContainer .flatpickr-date').flatpickr({
          altInput: true,
          altFormat: 'd/m/Y',
          dateFormat: 'Y-m-d',
          locale: {
            firstDayOfWeek: 1
          }
        });
      });

      // Delete Phase
      $(document).on('click', '.btn-delete-phase', function() {
        $(this).closest('.phase-item').remove();
        
        // Renumber phases
        $('.phase-item').each(function(index) {
          $(this).find('h6').text(`งวดที่ ${index + 1}`);
        });
      });

      // Add Team Member
      $('#addTeamMember').on('click', function() {
        const teamCount = $('.team-item').length + 1;
        const html = `
          <div class="team-item card shadow-none border p-3 mb-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h6 class="mb-0">สมาชิกทีม #${teamCount}</h6>
              <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-team">
                <i class="bx bx-trash me-1"></i> ลบ
              </button>
            </div>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">ชื่อ-นามสกุล <span class="text-danger">*</span></label>
                <select class="select2 form-select" data-allow-clear="true">
                  <option value="">เลือกสมาชิกทีม</option>
                  <option value="1">สมชาย มีสุข</option>
                  <option value="2">ณัฐพงษ์ รุ่งเรือง</option>
                  <option value="3">สมหญิง รักดี</option>
                  <option value="4">มานะ สมบัติ</option>
                  <option value="5">วิชัย สว่าง</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">ตำแหน่ง/บทบาท <span class="text-danger">*</span></label>
                <select class="select2 form-select" data-allow-clear="true">
                  <option value="">เลือกตำแหน่ง/บทบาท</option>
                  <option value="projectManager">ผู้จัดการโครงการ</option>
                  <option value="engineer">วิศวกรโครงการ</option>
                  <option value="architect">สถาปนิก</option>
                  <option value="foreman">ผู้ควบคุมงาน</option>
                  <option value="electricalEngineer">วิศวกรไฟฟ้า</option>
                  <option value="mechanicalEngineer">วิศวกรเครื่องกล</option>
                  <option value="safetyOfficer">เจ้าหน้าที่ความปลอดภัย</option>
                  <option value="purchasingOfficer">เจ้าหน้าที่จัดซื้อ</option>
                  <option value="accountant">เจ้าหน้าที่บัญชี</option>
                  <option value="admin">เจ้าหน้าที่ธุรการ</option>
                </select>
              </div>
              <div class="col-12">
                <label class="form-label">หน้าที่รับผิดชอบ</label>
                <textarea class="form-control" rows="2" placeholder="อธิบายหน้าที่รับผิดชอบ"></textarea>
              </div>
            </div>
          </div>
        `;
        
        $('#teamContainer').append(html);
        
        // Re-initialize Select2 for new elements
        $('#teamContainer .select2').select2();
      });

      // Delete Team Member
      $(document).on('click', '.btn-delete-team', function() {
        $(this).closest('.team-item').remove();
        
        // Renumber team members
        $('.team-item').each(function(index) {
          $(this).find('h6').text(`สมาชิกทีม #${index + 1}`);
        });
      });

      // Handle Client Selection
      $('.contact-list-item').on('click', function() {
        $('.contact-list-item').removeClass('selected');
        $(this).addClass('selected');
        
        // In a real application, this would populate the client form fields
        Swal.fire({
          title: 'เลือกลูกค้า',
          text: 'คุณต้องการใช้ข้อมูลลูกค้านี้หรือไม่?',
          icon: 'question',
          showCancelButton: true,
          confirmButtonText: 'ใช่, ใช้ข้อมูลนี้',
          cancelButtonText: 'ยกเลิก',
          customClass: {
            confirmButton: 'btn btn-primary me-3',
            cancelButton: 'btn btn-outline-secondary'
          },
          buttonsStyling: false
        }).then((result) => {
          if (result.isConfirmed) {
            // In a real app, this would populate the form with client data
            const clientName = $(this).find('p').text();
            const clientType = $(this).find('small').text();
            
            // Simulate form population with sample data
            if (clientType.includes('นิติบุคคล')) {
              $('#clientType').val('company').trigger('change');
              $('#companyName').val(clientName);
            } else {
              $('#clientType').val('individual').trigger('change');
              const nameParts = clientName.split(' ');
              if (nameParts.length >= 2) {
                $('#clientName').val(nameParts[0].replace('คุณ', ''));
                $('#clientLastname').val(nameParts[1]);
              }
            }
          }
        });
      });

      // Search functionality
      $('#searchClient').on('input', function() {
        const searchTerm = $(this).val().toLowerCase();
        
        $('.client-list .contact-list-item').each(function() {
          const clientText = $(this).text().toLowerCase();
          if (clientText.includes(searchTerm)) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
      
      // Search User
      $('#searchUser').on('input', function() {
        const searchTerm = $(this).val().toLowerCase();
        
        $('.user-list li').each(function() {
          const userText = $(this).text().toLowerCase();
          if (userText.includes(searchTerm)) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });

      // Add User from User List
      $('.user-list .btn-icon').on('click', function() {
        const userItem = $(this).closest('li');
        const userName = userItem.find('.fw-semibold').text();
        const userRole = userItem.find('small').text();
        
        // Add user to team
        const teamCount = $('.team-item').length + 1;
        const html = `
          <div class="team-item card shadow-none border p-3 mb-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h6 class="mb-0">สมาชิกทีม #${teamCount}</h6>
              <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-team">
                <i class="bx bx-trash me-1"></i> ลบ
              </button>
            </div>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">ชื่อ-นามสกุล <span class="text-danger">*</span></label>
                <select class="select2 form-select" data-allow-clear="true">
                  <option selected>${userName}</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">ตำแหน่ง/บทบาท <span class="text-danger">*</span></label>
                <select class="select2 form-select" data-allow-clear="true">
                  <option selected>${userRole}</option>
                </select>
              </div>
              <div class="col-12">
                <label class="form-label">หน้าที่รับผิดชอบ</label>
                <textarea class="form-control" rows="2" placeholder="อธิบายหน้าที่รับผิดชอบ">${userName} ทำหน้าที่เป็น${userRole}ประจำโครงการ</textarea>
              </div>
            </div>
          </div>
        `;
        
        $('#teamContainer').append(html);
        
        // Reinitialize Select2
        $('#teamContainer .select2').select2();
        
        // Show success message
        Swal.fire({
          position: 'top-end',
          icon: 'success',
          title: `เพิ่ม ${userName} เข้าทีมแล้ว`,
          showConfirmButton: false,
          timer: 1500,
          customClass: {
            popup: 'animate__animated animate__fadeInDown'
          }
        });
      });

      // Handle Add New User Form Submit
      $('#addNewUserForm').on('submit', function(e) {
        e.preventDefault();
        
        const firstName = $('#modalUserFirstName').val();
        const lastName = $('#modalUserLastName').val();
        const fullName = firstName + ' ' + lastName;
        const userRole = $('#modalUserRole').val();
        const userRoleText = $('#modalUserRole option:selected').text();
        
        // Validate form
        if (!firstName || !lastName || !userRole) {
          Swal.fire({
            title: 'กรุณากรอกข้อมูลให้ครบถ้วน',
            text: 'กรุณากรอกชื่อ, นามสกุล และเลือกตำแหน่ง/บทบาท',
            icon: 'warning',
            customClass: {
              confirmButton: 'btn btn-primary'
            },
            buttonsStyling: false
          });
          return;
        }
        
        // Add user to team
        const teamCount = $('.team-item').length + 1;
        const html = `
          <div class="team-item card shadow-none border p-3 mb-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h6 class="mb-0">สมาชิกทีม #${teamCount}</h6>
              <button type="button" class="btn btn-sm btn-text-danger p-0 btn-delete-team">
                <i class="bx bx-trash me-1"></i> ลบ
              </button>
            </div>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">ชื่อ-นามสกุล <span class="text-danger">*</span></label>
                <select class="select2 form-select" data-allow-clear="true">
                  <option selected>${fullName}</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">ตำแหน่ง/บทบาท <span class="text-danger">*</span></label>
                <select class="select2 form-select" data-allow-clear="true">
                  <option selected>${userRoleText}</option>
                </select>
              </div>
              <div class="col-12">
                <label class="form-label">หน้าที่รับผิดชอบ</label>
                <textarea class="form-control" rows="2" placeholder="อธิบายหน้าที่รับผิดชอบ">${fullName} ทำหน้าที่เป็น${userRoleText}ประจำโครงการ</textarea>
              </div>
            </div>
          </div>
        `;
        
        $('#teamContainer').append(html);
        
        // Reinitialize Select2
        $('#teamContainer .select2').select2();
        
        // Hide modal
        $('#addNewUserModal').modal('hide');
        
        // Show success message
        Swal.fire({
          position: 'top-end',
          icon: 'success',
          title: `เพิ่ม ${fullName} เข้าทีมแล้ว`,
          showConfirmButton: false,
          timer: 1500,
          customClass: {
            popup: 'animate__animated animate__fadeInDown'
          }
        });
        
        // Reset form
        $('#addNewUserForm')[0].reset();
      });

      // Form Validation
      const formValidation = FormValidation.formValidation(document.getElementById('addNewUserForm'), {
        fields: {
          modalUserFirstName: {
            validators: {
              notEmpty: {
                message: 'กรุณากรอกชื่อ'
              }
            }
          },
          modalUserLastName: {
            validators: {
              notEmpty: {
                message: 'กรุณากรอกนามสกุล'
              }
            }
          },
          modalUserEmail: {
            validators: {
              notEmpty: {
                message: 'กรุณากรอกอีเมล'
              },
              emailAddress: {
                message: 'กรุณากรอกอีเมลให้ถูกต้อง'
              }
            }
          },
          modalUserRole: {
            validators: {
              notEmpty: {
                message: 'กรุณาเลือกตำแหน่ง/บทบาท'
              }
            }
          }
        },
        plugins: {
          trigger: new FormValidation.plugins.Trigger(),
          bootstrap5: new FormValidation.plugins.Bootstrap5({
            eleValidClass: '',
            rowSelector: '.col-12, .col-sm-6'
          }),
          submitButton: new FormValidation.plugins.SubmitButton(),
          autoFocus: new FormValidation.plugins.AutoFocus()
        }
      });
    });
  </script>
</body>
</html>